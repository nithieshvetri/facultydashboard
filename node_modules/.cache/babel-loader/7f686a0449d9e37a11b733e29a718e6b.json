{"ast":null,"code":"import _defineProperty from\"D:/PROJECT/practice/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:/PROJECT/practice/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/PROJECT/practice/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/PROJECT/practice/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/PROJECT/practice/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import Input from\"./Input\";import ResultsList from\"./Results/ResultsList\";import MultiRangeSlider from\"./MultiRangeSlider\";import Select from\"./Select\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function SearchContainer(props){var base=\"http://10.30.10.14:8000/\";// console.log(\"welcome\",aa);\nvar _useState=useState({}),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),reset=_useState4[0],setReset=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),List=_useState6[0],setList=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),PersonData=_useState8[0],setPersonData=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),searchID=_useState10[0],setSearchID=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),valuesList=_useState12[0],setValuesList=_useState12[1];var _useState13=useState({start:0,end:18}),_useState14=_slicedToArray(_useState13,2),Index=_useState14[0],setIndex=_useState14[1];var _useState15=useState({}),_useState16=_slicedToArray(_useState15,2),fieldValues=_useState16[0],setFieldValues=_useState16[1];// Updating State when input values change\nvar _useState17=useState([{\"CAY_FAP_Score__min\":\"0.00\"},{\"CAY_FAP_Score__max\":\"11.00\"},{\"CAY_Feedback_Score__min\":\"0.00\"},{\"CAY_Feedback_Score__max\":\"1.00\"},{\"CAY_FRP_Score__min\":\"0.08\"},{\"CAY_FRP_Score__max\":\"8.10\"},{\"CAY_FRS__min\":\"-706\"},{\"CAY_FRS__max\":\"8201\"}]),_useState18=_slicedToArray(_useState17,2),thamz=_useState18[0],setthamz=_useState18[1];useEffect(function(){var response=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"\".concat(base,\"api/faculty/minmax/\"));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;JSON.stringify(data);setthamz(data);case 6:case\"end\":return _context.stop();}}},_callee);}));return function response(){return _ref.apply(this,arguments);};}();response();},[]);console.log(parseInt(thamz[1].CAY_FAP_Score__max),'niawsf');var a2=parseInt(thamz[1].CAY_FAP_Score__max);var a1=parseInt(thamz[0].CAY_FAP_Score__min);// let\nvar facultyData=[{label:\"Faculty Id\",type:\"text\",\"data-element\":\"input\",id:\"faculty_id\"},{label:\"Faculty Name\",type:\"text\",\"data-element\":\"input\",id:\"name\"},{label:\"Designation\",\"data-element\":\"select\",id:\"designation\",url:\"/designation\"},{label:\"Department\",\"data-element\":\"select\",id:\"department\",url:\"/dept\"},{label:\"Central Responsibility\",\"data-element\":\"select\",id:\"central_responsibility\",url:\"/cr\"},// {\n//   label: \"Email Id\",\n//   type: \"text\",\n//   \"data-element\": \"input\",\n//   id: \"email\",\n// },\n// {\n//   label: \"Date of joining\",\n//   type: \"date\",\n//   \"data-element\": \"input\",\n//   id: \"date_of_joining\",\n// },\n{label:\"FAP Score\",type:\"range\",min:parseInt(thamz[0].CAY_FAP_Score__min),max:parseInt(thamz[1].CAY_FAP_Score__max),step:0.1,\"data-element\":\"input\",id:\"CAY_FAP_Score\"},{label:\"Feedback Score\",type:\"range\",min:parseInt(thamz[2].CAY_Feedback_Score__min),max:parseInt(thamz[3].CAY_Feedback_Score__max),step:0.1,\"data-element\":\"input\",id:\"CAY_Feedback_Score\"},{label:\"FRP Score\",type:\"range\",min:parseInt(thamz[4].CAY_FRP_Score__min),max:parseInt(thamz[5].CAY_FRP_Score__max),step:0.1,\"data-element\":\"input\",id:\"CAY_FRP_Score\"},{label:\"FRS Score\",type:\"range\",min:parseInt(thamz[6].CAY_FRS__min),max:parseInt(thamz[7].CAY_FRS__max),// min: parseInt(thamz[0].min),\n// max: parseInt(thamz[0].CAY_FAP_Score__max),\nstep:25,\"data-element\":\"input\",id:\"CAY_FRS\"}];var resetValues=function resetValues(a){facultyData.map(function(x){return setFieldValues(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},x.id,''));});});};useEffect(function(){resetValues(0);},[]);useEffect(function(){console.log(\"fie;ld\",fieldValues);},[fieldValues]);var changeHandler=function changeHandler(key,val){console.log(\"key and val\",key,val);// console.log(\"Test\", valuesList[key].min.current)\n// setIndex({\n//   start: 0,\n//   end: 18,\n// });\n// if (Object.keys(query).length <= 0) return;\nObject.keys(valuesList).indexOf(key)>=0?setQuery(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},key,{min:valuesList[key].min.current,max:valuesList[key].max.current}));}):setQuery(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},key,val));});setFieldValues(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},key,val));});};console.log(thamz[0],'gcbudjs');// fetching list of faculties\nvar ni=thamz[0];// console.log(\"minin\",ni.CAY_FAP_Score__min)\nuseEffect(function(){var response=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$axios$get2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"\".concat(base,\"api/faculty/lists/\"));case 2:_yield$axios$get2=_context2.sent;data=_yield$axios$get2.data;JSON.stringify(data);setList(data);// console.log(\"Liost\",data)\nsetPersonData(data);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function response(){return _ref2.apply(this,arguments);};}();response();},[]);// Displaying Faculty Details by their Id\nuseEffect(function(){if(searchID===\"\")return;// console.log(searchID);\nvar fetchPerson=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response,person;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:response=fetch(\"\".concat(base,\"api/faculty/lists/?faculty_id__icontains=\").concat(searchID));_context3.next=3;return response;case 3:_context3.next=5;return _context3.sent.json();case 5:person=_context3.sent;// console.log(\"faculty\", person);\nsetPersonData(person);case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchPerson(){return _ref3.apply(this,arguments);};}();fetchPerson();},[searchID]);// console.log(PersonData,'nnk')\n// request based on Input values\nuseEffect(function(){var url=\"api/faculty/lists/?\";// console.log(\"QQQQQQQuery\", query)\nif(!Object.keys(query))return;Object.keys(query).forEach(function(x){url+=Object.keys(valuesList).indexOf(x)>=0?\"\".concat(x,\"__lte=\").concat(valuesList[x].max.current,\"&\").concat(x,\"__gte=\").concat(valuesList[x].min.current,\"&\"):\"\".concat(x,\"__icontains=\").concat(query[x],\"&\");});var fetchData=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(url){var resp,response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(\"\".concat(base).concat(url));case 2:resp=_context4.sent;_context4.next=5;return resp.json();case 5:response=_context4.sent;setPersonData(response);setList(response);case 8:case\"end\":return _context4.stop();}}},_callee4);}));return function fetchData(_x){return _ref4.apply(this,arguments);};}();fetchData(url);// console.warn(\"urlll\",url)\n// console.warn(\"urlll\",query)\n},[query,valuesList]);//console.log(\"vaa\",query)\nuseEffect(function(){setReset(0);console.log(\"Queryyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy\",query);},[query]);useEffect(function(){},[valuesList]);useEffect(function(){if(reset==1){setQuery({});}},[reset]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"search-container\",children:facultyData.map(function(field,index){return field[\"data-element\"]===\"input\"?field['type']==='range'?/*#__PURE__*/_jsx(MultiRangeSlider,_objectSpread(_objectSpread({reset:reset},field),{},{list:setValuesList,onChange:changeHandler}),index):/*#__PURE__*/_jsx(Input,_objectSpread(_objectSpread({value:fieldValues[field.id],reset:reset},field),{},{onChange:changeHandler}),index):/*#__PURE__*/ // <Input label={field.label} type={field.type} />\n_jsx(Select,_objectSpread(_objectSpread({base:base,reset:reset},field),{},{value:query[field.id]===undefined?'':query[field.id],onChange:changeHandler}),index);})}),/*#__PURE__*/_jsx(\"button\",{className:\"reset\",onClick:function onClick(e){// window.location.reload(false)\nresetValues(2);console.log(\"field\",fieldValues['name']);setReset(1);// setQuery({})\n},children:\"Reset\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-results-container\",children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-results\",children:[/*#__PURE__*/_jsxs(\"h5\",{children:[\"TOTAL LIST OF FACULTIES:\",List.length]}),PersonData.length===List.length||PersonData.length>0?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(ResultsList,{base:base,list:List,updateId:setSearchID,updateIndex:setIndex,Index:Index})}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"span\",{children:\"No Match Found\"})})]})]})]});}","map":{"version":3,"sources":["D:/PROJECT/practice/src/components/Search/SearchContainer.js"],"names":["React","useState","useEffect","axios","Input","ResultsList","MultiRangeSlider","Select","SearchContainer","props","base","query","setQuery","reset","setReset","List","setList","PersonData","setPersonData","searchID","setSearchID","valuesList","setValuesList","start","end","Index","setIndex","fieldValues","setFieldValues","thamz","setthamz","response","get","data","JSON","stringify","console","log","parseInt","CAY_FAP_Score__max","a2","a1","CAY_FAP_Score__min","facultyData","label","type","id","url","min","max","step","CAY_Feedback_Score__min","CAY_Feedback_Score__max","CAY_FRP_Score__min","CAY_FRP_Score__max","CAY_FRS__min","CAY_FRS__max","resetValues","a","map","x","prev","changeHandler","key","val","Object","keys","indexOf","prevState","current","ni","fetchPerson","fetch","json","person","forEach","fetchData","resp","field","index","undefined","e","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Input from \"./Input\";\r\nimport ResultsList from \"./Results/ResultsList\";\r\nimport MultiRangeSlider from \"./MultiRangeSlider\";\r\nimport Select from \"./Select\";\r\nexport default function SearchContainer(props) {\r\n  const base=\"http://10.30.10.14:8000/\"\r\n  // console.log(\"welcome\",aa);\r\n  \r\n  const [query, setQuery] = useState({});\r\n  const [reset,setReset]=useState(0);\r\n  const [List, setList] = useState([]);\r\n  const [PersonData, setPersonData] = useState([]);\r\n  const [searchID, setSearchID] = useState(\"\");\r\n  const [valuesList, setValuesList] = useState({});\r\n  const [Index, setIndex] = useState({\r\n    start: 0,\r\n    end: 18,\r\n  });\r\n  const [fieldValues, setFieldValues] = useState({})\r\n  // Updating State when input values change\r\n  const [thamz,setthamz]=useState([{\"CAY_FAP_Score__min\": \"0.00\"}, {\"CAY_FAP_Score__max\": \"11.00\"}, {\"CAY_Feedback_Score__min\": \"0.00\"}, {\"CAY_Feedback_Score__max\": \"1.00\"}, {\"CAY_FRP_Score__min\": \"0.08\"}, {\"CAY_FRP_Score__max\": \"8.10\"}, {\"CAY_FRS__min\": \"-706\"}, {\"CAY_FRS__max\": \"8201\"}])\r\n\r\n  useEffect(()=>{\r\n    const response = async () => {\r\n      const { data } = await axios.get(\r\n       `${base}api/faculty/minmax/`\r\n       );\r\n      JSON.stringify(data);\r\n      setthamz(data);\r\n  };\r\n  response();\r\n},[])\r\nconsole.log(parseInt(thamz[1].CAY_FAP_Score__max),'niawsf')\r\nlet a2=parseInt(thamz[1].CAY_FAP_Score__max)\r\nlet a1=parseInt(thamz[0].CAY_FAP_Score__min)\r\n// let\r\n  const facultyData = [\r\n    {\r\n      label: \"Faculty Id\",\r\n      type: \"text\",\r\n      \"data-element\": \"input\",\r\n      id: \"faculty_id\",\r\n    },\r\n    {\r\n      label: \"Faculty Name\",\r\n      type: \"text\",\r\n      \"data-element\": \"input\",\r\n      id: \"name\",\r\n    },\r\n    {\r\n      label: \"Designation\",\r\n      \"data-element\": \"select\",\r\n      id: \"designation\",\r\n      url: \"/designation\",\r\n    },\r\n    {\r\n      label: \"Department\",\r\n      \"data-element\": \"select\",\r\n      id: \"department\",\r\n      url: \"/dept\",\r\n    },\r\n    {\r\n      label: \"Central Responsibility\",\r\n      \"data-element\": \"select\",\r\n      id: \"central_responsibility\",\r\n      url: \"/cr\",\r\n    },\r\n    // {\r\n    //   label: \"Email Id\",\r\n    //   type: \"text\",\r\n    //   \"data-element\": \"input\",\r\n    //   id: \"email\",\r\n    // },\r\n    // {\r\n    //   label: \"Date of joining\",\r\n    //   type: \"date\",\r\n    //   \"data-element\": \"input\",\r\n    //   id: \"date_of_joining\",\r\n    // },\r\n    {\r\n      label: \"FAP Score\",\r\n      type: \"range\",\r\n      min: parseInt(thamz[0].CAY_FAP_Score__min),\r\n      max: parseInt(thamz[1].CAY_FAP_Score__max),\r\n      step: 0.1,\r\n      \"data-element\": \"input\",\r\n      id: \"CAY_FAP_Score\",\r\n    },\r\n    {\r\n      label: \"Feedback Score\",\r\n      type: \"range\",\r\n      min: parseInt(thamz[2].CAY_Feedback_Score__min),\r\n      max: parseInt(thamz[3].CAY_Feedback_Score__max),\r\n      step: 0.1,\r\n      \"data-element\": \"input\",\r\n      id: \"CAY_Feedback_Score\",\r\n    },\r\n    {\r\n      label: \"FRP Score\",\r\n      type: \"range\",\r\n      min: parseInt(thamz[4].CAY_FRP_Score__min),\r\n      max: parseInt(thamz[5].CAY_FRP_Score__max),\r\n      step: 0.1,\r\n      \"data-element\": \"input\",\r\n      id: \"CAY_FRP_Score\",\r\n    },\r\n    {\r\n      label: \"FRS Score\",\r\n      type: \"range\",\r\n      min:parseInt(thamz[6].CAY_FRS__min),\r\n      max:parseInt(thamz[7].CAY_FRS__max),\r\n      // min: parseInt(thamz[0].min),\r\n      // max: parseInt(thamz[0].CAY_FAP_Score__max),\r\n      step: 25,\r\n      \"data-element\": \"input\",\r\n      id: \"CAY_FRS\",\r\n    },\r\n  ];\r\n  \r\n  const resetValues = (a) => {\r\n    facultyData.map(x => setFieldValues( prev => ({\r\n      ...prev,\r\n      [x.id] : ''\r\n    })))\r\n  }\r\n\r\n  useEffect(()=>{\r\n    resetValues(0)\r\n  }, [])\r\n  useEffect(()=>{\r\n\r\n    console.log(\"fie;ld\",fieldValues)\r\n  }, [fieldValues])\r\n  const changeHandler = (key, val) => {\r\n    console.log(\"key and val\" ,key, val )\r\n    // console.log(\"Test\", valuesList[key].min.current)\r\n    // setIndex({\r\n    //   start: 0,\r\n    //   end: 18,\r\n    // });\r\n    // if (Object.keys(query).length <= 0) return;\r\n    Object.keys(valuesList).indexOf(key) >= 0 ? \r\n    setQuery((prevState)=>({\r\n      ...prevState,\r\n      [key]: {min: valuesList[key].min.current, max: valuesList[key].max.current}\r\n    }))\r\n    :\r\n    setQuery((prevState) => ({\r\n      ...prevState,\r\n      [key]: val,\r\n\r\n    }));\r\n    \r\n    setFieldValues(prev => ({\r\n      ...prev,\r\n      [key]: val\r\n    }))\r\n  };\r\n\r\n  \r\nconsole.log(thamz[0],'gcbudjs')\r\n  // fetching list of faculties\r\nlet ni=thamz[0]\r\n// console.log(\"minin\",ni.CAY_FAP_Score__min)\r\n  useEffect(() => {\r\n    const response = async () => {\r\n      const { data } = await axios.get(\r\n        `${base}api/faculty/lists/`\r\n      );\r\n      JSON.stringify(data);\r\n      setList(data);\r\n      // console.log(\"Liost\",data)\r\n      setPersonData(data);\r\n    };\r\n    response();\r\n  }, []);\r\n\r\n  // Displaying Faculty Details by their Id\r\n\r\n  useEffect(() => {\r\n    if (searchID === \"\") return;\r\n    // console.log(searchID);\r\n    const fetchPerson = async () => {\r\n      const response = fetch(\r\n        `${base}api/faculty/lists/?faculty_id__icontains=${searchID}`\r\n      );\r\n      const person = await (await response).json();\r\n      // console.log(\"faculty\", person);\r\n      setPersonData(person);\r\n    };\r\n    fetchPerson();\r\n  }, [searchID]);\r\n  // console.log(PersonData,'nnk')\r\n\r\n  // request based on Input values\r\n\r\n  useEffect(() => {\r\n    let url = \"api/faculty/lists/?\";\r\n    // console.log(\"QQQQQQQuery\", query)\r\n    if (!Object.keys(query)) return;\r\n    Object.keys(query).forEach((x) => {\r\n      url +=\r\n        Object.keys(valuesList).indexOf(x) >=0\r\n          ? `${x}__lte=${valuesList[x].max.current}&${x}__gte=${valuesList[x].min.current}&`\r\n          : `${x}__icontains=${query[x]}&`;\r\n    });\r\n    const fetchData = async (url) => {\r\n      const resp = await fetch(`${base}${url}`);\r\n      const response = await resp.json();\r\n      setPersonData(response);\r\n      setList(response);\r\n      \r\n    };\r\n    fetchData(url);\r\n    // console.warn(\"urlll\",url)\r\n    // console.warn(\"urlll\",query)\r\n  }, [query,valuesList]);\r\n  //console.log(\"vaa\",query)\r\n  useEffect(()=>{\r\n    setReset(0)\r\n    console.log(\"Queryyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy\",query)\r\n  }, [query])\r\n\r\n  useEffect(()=>{\r\n  }, [valuesList])\r\n\r\n  useEffect(()=>{\r\n    if(reset==1){\r\n\r\n    setQuery({})}\r\n  },[reset])\r\n\r\n\r\n\r\n  \r\n  return (\r\n    <>\r\n      <div className=\"search-container\">\r\n        {facultyData.map((field,index) =>\r\n          field[\"data-element\"] === \"input\" ? (\r\n           field['type'] === 'range' ?   <MultiRangeSlider key={index} reset={reset}\r\n           {...field} list = {setValuesList}\r\n           onChange={changeHandler}\r\n         /> : <Input  key={index} value={fieldValues[field.id]}  reset={reset} {...field} onChange={changeHandler} />\r\n          ) : (\r\n            // <Input label={field.label} type={field.type} />\r\n            <Select key={index}  base={base} reset={reset} {...field} value={query[field.id] === undefined ? '' : query[field.id]} onChange={changeHandler} />\r\n          )\r\n        )}\r\n      </div>\r\n      \r\n\r\n      <button  className=\"reset\" onClick={(e)=>{\r\n        // window.location.reload(false)\r\n        resetValues(2);\r\n        console.log(\"field\" ,fieldValues['name'] )\r\n\r\n        setReset(1);\r\n        // setQuery({})\r\n      }\r\n        }>Reset</button>\r\n      <div className=\"search-results-container\">\r\n        <hr />\r\n        <div className=\"search-results\">\r\n          <h5>TOTAL LIST OF FACULTIES:{List.length}</h5>\r\n          \r\n          {/* checking whether the states have same length before rendering */}\r\n          {PersonData.length === List.length || PersonData.length > 0 ? (\r\n            <>\r\n              <ResultsList\r\n              base={base}\r\n                list={List}\r\n                updateId={setSearchID}\r\n                updateIndex={setIndex}\r\n                Index={Index}\r\n              />\r\n              \r\n            </>\r\n          ) : (\r\n            <>\r\n              {/* This element will render when there is no match found by checking the length of state variable ie, PersonData */}\r\n              <span>No Match Found</span>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}